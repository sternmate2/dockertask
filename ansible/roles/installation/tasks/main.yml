
- name: Change file ownership, group and permissions
  ansible.builtin.file:
    path: /etc/script.sh
    owner: shahars
    group: shahars
    mode: '0755'




- name: Install Azure CLI    
  ansible.builtin.shell: curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash


- name: Execute the command in remote shell; stdout goes to the specified file on the remote
  ansible.builtin.shell: sudo sh /etc/script.sh
  become: true



# - name: Let's copy our executable script to remote location, execute script and get result back.
#   remote_user: root
#   sudo: yes
#   hosts: webservers

#     - name: Transfer executable script script
#       copy: src dest=/home/shahars/script.sh mode=0777

#     - name: Execute the script
#       command: sh /home/shahars/script.sh

# ---
# - name: Let's copy our executable script to remote location, execute script and get result back.
#   remote_user: root
#   sudo: yes
#   hosts: webservers
#   tasks:
#      - name: Transfer executable script script
#        copy: src=./script.sh home/shahars/script.sh mode=0777
 
#      - name: Execute the script
#        command: sh home/shahars/script.sh
